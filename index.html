<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Galaxy Orbit Effect</title>
  <style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; }
  </style>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.154.0/examples/js/controls/OrbitControls.js"></script>
<script>
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
  camera.position.z = 100;

  const renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;

  // Hành tinh trung tâm
  const planetGeo = new THREE.SphereGeometry(12, 64, 64);
  const planetMat = new THREE.MeshStandardMaterial({ color: 0xffaa44, emissive: 0xaa3300 });
  const planet = new THREE.Mesh(planetGeo, planetMat);
  scene.add(planet);

  // Ánh sáng
  const pointLight = new THREE.PointLight(0xffffff, 2, 1000);
  pointLight.position.set(50,50,50);
  scene.add(pointLight);
  scene.add(new THREE.AmbientLight(0x404040, 2));

  // Nền sao
  const starsGeo = new THREE.BufferGeometry();
  const starCount = 3000;
  const positions = new Float32Array(starCount * 3);
  for (let i=0; i<starCount*3; i++) positions[i] = (Math.random()-0.5)*2000;
  starsGeo.setAttribute("position", new THREE.BufferAttribute(positions, 3));
  const starsMat = new THREE.PointsMaterial({ size: 2, color: 0xffffff, transparent: true, opacity: 0.8 });
  scene.add(new THREE.Points(starsGeo, starsMat));

  // Các orb nhiều màu
  const colors = [0xff4444, 0x44ff44, 0x4444ff, 0xffff44];
  const orbs = [];
  const radii = [25, 40, 55, 70];
  const speeds = [0.02, 0.015, 0.01, 0.008];

  for (let i=0; i<colors.length; i++) {
    const geo = new THREE.SphereGeometry(5, 32, 32);
    const mat = new THREE.MeshStandardMaterial({ color: colors[i], emissive: colors[i], emissiveIntensity: 0.7 });
    const orb = new THREE.Mesh(geo, mat);
    scene.add(orb);
    orbs.push({mesh: orb, r: radii[i], speed: speeds[i], angle: Math.random()*Math.PI*2});
  }

  // Hiệu ứng glow (sprite)
  const spriteMaterial = new THREE.SpriteMaterial({
    map: new THREE.TextureLoader().load("https://threejs.org/examples/textures/sprites/glow.png"),
    color: 0xffffff,
    transparent: true,
    blending: THREE.AdditiveBlending
  });
  orbs.forEach(o => {
    const sprite = new THREE.Sprite(spriteMaterial);
    sprite.scale.set(20,20,1);
    o.mesh.add(sprite);
  });

  function animate() {
    requestAnimationFrame(animate);
    planet.rotation.y += 0.002;

    orbs.forEach(o=>{
      o.angle += o.speed;
      o.mesh.position.set(Math.cos(o.angle)*o.r, 0, Math.sin(o.angle)*o.r);
    });

    controls.update();
    renderer.render(scene, camera);
  }
  animate();

  window.addEventListener("resize", ()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>
</body>
</html>
